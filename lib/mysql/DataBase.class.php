<?phpclass DataBase{	private static $nomConnexionDefaut;	private static $instance = array();	private static $connexionData = array();	public function __construct( $nomConnexion )	{		if (!isset(self::$instance[ $nomConnexion ]))			self::$instance[ $nomConnexion ] = $this;		return self::$instance[ $nomConnexion ];	}	public static function getInstance( $nomConnexion = '' )	{		if ( count( self::$instance ) == 1 )			foreach (self::$instance as $nomConnexionDefaut => $buffer)				self::setNomConnexionDefaut( $nomConnexionDefaut );		if ( !empty($nomConnexion) )		{			self::connexion( $nomConnexion );			if ( isset( self::$instance[ $nomConnexion ] ))				return self::connexion( $nomConnexion );		}		if ( isset( self::$instance[ self::$nomConnexionDefaut ] ))			return self::connexion( self::$nomConnexionDefaut );	}	public static function addConnexion($login, $pass, $dbName, $nomConnexion, $host = 'localhost', $port = 3306, $driver = 'mysql')	{		self::$connexionData[ $nomConnexion ] = array													(														'login'			=>	$login,														'pass'			=>	$pass,														'dbName'		=>	$dbName,														'nomConnexion'	=>	$nomConnexion,														'host'			=>	$host,														'port'			=>	$port,														'driver'		=>	$driver													);	}	public static function addConnexionSqlite($path, $nomConnexion)	{		self::$connexionData[ $nomConnexion ] = array													(														'path'			=>	$path,														'driver'		=>	'sqlite'													);	}	public static function connexion($nomConnexion)	{		if ( !empty($nomConnexion) && !isset( self::$instance[ $nomConnexion ] ))		{			if(!isset( self::$instance[ $nomConnexion ] ))				new self( $nomConnexion );			$data = self::$connexionData[ $nomConnexion ];			try			{				$arg = array();				if ( defined('PDO::MYSQL_ATTR_INIT_COMMAND') )					$arg[ PDO::MYSQL_ATTR_INIT_COMMAND ] = 'SET NAMES utf8';				if ( $data['driver'] == 'sqlite' )					self::$instance[ $nomConnexion ] = new PDO( 'sqlite:'.$data['path']);				else					self::$instance[ $nomConnexion ] = new PDO( $data['driver'].':dbname='.$data['dbName'].';host='.$data['host'].';port='.$data['port'], $data['login'], $data['pass'], $arg);				if ( !defined('PDO::MYSQL_ATTR_INIT_COMMAND') || $data['driver'] == 'sqlite')					self::$instance[ $nomConnexion ]->exec('SET NAMES utf8');				$erreur = false;			}			catch (PDOException $e)			{	//			echo $e;				die('Connection à MySQL impossible !');			}		}		if (!isset( self::$instance[ $nomConnexion ] ))			die('Connection à MySQL impossible : impossible de trouver le pool de connexion !');		return self::$instance[ $nomConnexion ]; 	}	public static function setNomConnexionDefaut( $nomConnexionDefaut )	{		self::$nomConnexionDefaut = $nomConnexionDefaut;		self::connexion( $nomConnexionDefaut );	}	public static function hasConnexion()	{		return !empty( self::$connexionData );	}}